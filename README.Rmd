---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# stockr

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/stockr)](https://CRAN.R-project.org/package=stockr)
<!-- badges: end -->

`stockr` is an R package that retrieve financial data from the Yahoo Finance API, given company names or stock ticker symbols^[https://en.wikipedia.org/wiki/Ticker_symbol].

> `stockr` functions return a standardized `data.frame` with consistent column names, allowing you to focus directly on financial analysis.


## Installation

You can install the development version of stockr:

``` r
devtools::install_github("clement-LVD/stockr")
```

## Examples

**Fetch ticker symbol and actual values (scraping).** Given a keyword such a company name, search informations on https://finance.yahoo.com/lookup/ with `stockr::fetch_indices`.

```{r example}
library(stockr)

toyota_indices <- fetch_indices(names = "TOYOTA")

str(toyota_indices) # Results of the day, over all marketplaces
```

Typically, you start by retrieving an exact ticker symbol using `stockr::fetch_indices`. For example, Toyota's stock on the '`r toyota_indices$exchange[1]`' is identified by the ticker symbol '`r toyota_indices$symbol[1]`'. You can then use these ticker symbols to fetch the corresponding historical financial data (see below).

**Fetch historical financial data (Yahoo API).**

```{r example2}

# Fetch historical values, given ticker symbol(s)
saab_histo <- fetch_historic(symbols = "SAAB-B.ST", .verbose = FALSE)

str(saab_histo)
```

**Chaining examples 1 & 2.** Fetch ticker symbols associated with a keyword such as companes names, and get historical financial data. 

```{r example3}
# 1) fetch_indices (optionally filter a precise marketplace)
indices <- fetch_indices(names = c("VOLVO", "SAAB", "TOYOTA")
                         , marketplaces = "BER")
# Keep only the german marketplace (BERlin) informations

# 2) Fetch historical values, given ticker symbol(s)
datas <- fetch_historic(symbols = indices$symbol)

str(datas)
```


## Programming philosophy
The `stockr` functions (`fetch_historic` & `fetch_indices`) returns a standardized `data.frame` containing financial data from the Yahoo Finance API:

- The returned data is always in the form of a simple `data.frame` object.

- The variable names in the returned `data.frame` are consistent and inherited directly from the Yahoo Finance API, although they are converted to lowercase.

- No specific data analysis package dependencies are imposed on the user : no assumptions are made about the analysis tools you'll used (e.g., no dependencies on `zoo` or `xts` for time series analysis since `stockr` does not return time series objects).

