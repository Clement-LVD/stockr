---
output: github_document
language: en
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
Sys.setlocale("LC_TIME", "en_US.UTF-8")  # En anglais

```

# stockr

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/stockr)](https://CRAN.R-project.org/package=stockr)
<!-- badges: end -->

`stockr` is an R package that retrieve financial data from the Yahoo Finance API, given company names or ticker symbols^[https://en.wikipedia.org/wiki/Ticker_symbol].

> `stockr` functions return a standardized `data.frame` with consistent column names, allowing you to focus directly on financial analysis.

## Installation

You can install the development version of stockr:

``` r
devtools::install_github("clement-LVD/stockr")
```

## Examples

**Fetch ticker symbol and actual values.** Given keyword(s) such companies names, search latest stock values with `stockr::fetch_info_from_name`.

```{r example}
library(stockr)

toyota_indices <- stockr::fetch_info_from_name(names = "TOYOTA")

str(toyota_indices) # Results of the day, over all marketplaces
```

Typically, you start by retrieving an exact ticker symbol using `stockr::fetch_info_from_name` or another way. You can then use these ticker symbols to fetch the corresponding historical financial data (see below).

**Fetch historical financial data with.**  Given ticker symbol(s), get financial values with `stockr::fetch_historic` :

```{r example2}

# Fetch historical values, given ticker symbol(s)
histo <- stockr::fetch_historic(symbols = c("SAAB-B.ST", "VOLV-B.ST"), .verbose = FALSE)

str(histo)
```

This `data.frame` contain daily values.

**Chaining examples 1 & 2.** Fetch ticker symbols associated with keyword(s) such as companies names, and get historical financial data for these symbols. 

```{r example3}
# 1) fetch_indices (optionally filter a precise marketplace)
indices <- stockr::fetch_info_from_name(names = c("VOLVO", "RENAULT")
                         , exchange = "STO")
# Keep only the swedish exchange place (STOckholm)

# 2) Fetch historical values, given ticker symbol(s)
datas <- stockr::fetch_historic(symbols = indices$symbol)

str(datas)
```

## Technical details

**Sources.**`stockr::fetch_info_from_name()` scrap data from https://finance.yahoo.com/lookup/ ; and `stockr::fetch_historic()` reach the Yahoo Finance API.

**Role of stockr in the 'Reach Yahoo Finance from R' ecosystem.** Other packages are partially redundant with `stockr` : `quantmod` and `yahoofinancer`. 

```{r echo=FALSE}

procon <- data.frame(Pro = "`stockr` have the minimal amount of dependencies in this ecosystem"
       ,    Con = "Other packages offer more functions. For example, `yahoofinancer` provides currency conversion functions, and `quantmod` offers time series data visualization methods")

knitr::kable(procon)
```

The `data.frame` of historical financial values returned by these packages have different properties, see below. 

```{r echo=FALSE}

deps <- data.frame(names = c("stockr", "yahoofinancer", "quantmod")
  
, fetch_historic = c("`stockr::fetch_historic` return a standard `data.frame`",
                 "`yahoofinancer` methods return an `R6` class object (e.g., `Ticker$get_history`)"
                 , "`quantmod` return a time.series object (`quantmod::getSymbols` return a `xts` & `zoo` object)" ) )

knitr::kable(deps, row.names = F)


```



